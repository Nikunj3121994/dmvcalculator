(function(){var y,tt,it,rt,ut,ft,et,p,ot,st,w,ht,ct,u,lt,t,e,o,at,s,h,vt,b,k,yt,i,n,c,d,pt,f,r,g,l,a,nt,v,wt,ni,bt,kt=[].slice,dt={}.hasOwnProperty,gt=function(n,t){function r(){this.constructor=n}for(var i in t)dt.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},ti=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};at={catchupTime:500,initialRate:.03,minTime:500,ghostTime:250,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!1}};i=function(){var n;return null!=(n="undefined"!=typeof performance&&null!==performance?"function"==typeof performance.now?performance.now():void 0:void 0)?n:+new Date};c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;o=window.cancelAnimationFrame||window.mozCancelAnimationFrame;null==c&&(c=function(n){return setTimeout(n,50)},o=function(n){return clearTimeout(n)});pt=function(n){var t,r;return t=i(),r=function(){var u;return u=i()-t,t=i(),n(u,function(){return c(r)})},r()};d=function(){var i,t,n;return n=arguments[0],t=arguments[1],i=3<=arguments.length?kt.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,i):n[t]};s=function(){var n,t,r,f,i,u,e;for(t=arguments[0],f=2<=arguments.length?kt.call(arguments,1):[],u=0,e=f.length;e>u;u++)if(r=f[u])for(n in r)dt.call(r,n)&&(i=r[n],null!=t[n]&&"object"==typeof t[n]&&null!=i&&"object"==typeof i?s(t[n],i):t[n]=i);return t};lt=function(n){var i,r,u,t,f;for(r=i=0,t=0,f=n.length;f>t;t++)u=n[t],r+=Math.abs(u),i++;return r/i};vt=function(n,t){var i,r,u;if(null==n&&(n="options"),null==t&&(t=!0),u=document.querySelector("[data-pace-"+n+"]")){if(i=u.getAttribute("data-pace-"+n),!t)return i;try{return JSON.parse(i)}catch(f){return r=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}};null==window.Pace&&(window.Pace={});n=Pace.options=s(at,window.paceOptions,vt());p=function(n){function t(){return ni=t.__super__.constructor.apply(this,arguments)}return gt(t,n),t}(Error);tt=function(){function t(){this.progress=0}return t.prototype.getElement=function(){var t;if(null==this.el){if(t=document.querySelector(n.target),!t)throw new p;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace("pace-done","");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"><\/div>\n<\/div>\n<div class="pace-activity"><\/div>';null!=t.firstChild?t.insertBefore(this.el,t.firstChild):t.appendChild(this.el)}return this.el},t.prototype.finish=function(){var n;return n=this.getElement(),n.className=n.className.replace("pace-active",""),n.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},t.prototype.update=function(n){return this.progress=n,this.render()},t.prototype.destroy=function(){return this.getElement().parentNode.removeChild(this.getElement()),this.el=void 0},t.prototype.render=function(){var t,i;return null==document.querySelector(n.target)?!1:(t=this.getElement(),t.children[0].style.width=""+this.progress+"%",(!this.lastRenderedProgress||0|this.lastRenderedProgress|0!==this.progress)&&(t.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),t.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress)},t.prototype.done=function(){return this.progress>=100},t}();et=function(){function n(){this.bindings={}}return n.prototype.trigger=function(n,t){var f,i,e,r,u;if(null!=this.bindings[n]){for(r=this.bindings[n],u=[],i=0,e=r.length;e>i;i++)f=r[i],u.push(f.call(this,t));return u}},n.prototype.on=function(n,t){var i;return null==(i=this.bindings)[n]&&(i[n]=[]),this.bindings[n].push(t)},n}();nt=window.XMLHttpRequest;a=window.XDomainRequest;l=window.WebSocket;h=function(n,t){var f,i,r,u=[];for(i in t.prototype)try{r=t.prototype[i];null==n[i]&&"function"!=typeof r?u.push(n[i]=r):u.push(void 0)}catch(e){f=e}return u};ot=function(t){function i(){var t,r=this;i.__super__.constructor.apply(this,arguments);t=function(t){var i;return i=t.open,t.open=function(u,f){var e;return e=(null!=u?u:"GET").toUpperCase(),ti.call(n.ajax.trackMethods,e)>=0&&r.trigger("request",{type:u,url:f,request:t}),i.apply(t,arguments)}};window.XMLHttpRequest=function(n){var i;return i=new nt(n),t(i),i};h(window.XMLHttpRequest,nt);null!=a&&(window.XDomainRequest=function(){var n;return n=new a,t(n),n},h(window.XDomainRequest,a));null!=l&&n.ajax.trackWebSockets&&(window.WebSocket=function(n,t){var i;return i=new l(n,t),r.trigger("request",{type:"socket",url:n,protocols:t,request:i}),i},h(window.WebSocket,l))}return gt(i,t),i}(et);v=null;b=function(){return null==v&&(v=new ot),v};n.restartOnRequestAfter!==!1&&b().on("request",function(t){var r,i,u;return u=t.type,i=t.request,Pace.running?void 0:(r=arguments,setTimeout(function(){var n,h,t,o,s,f,e;if(h="socket"===u?i.readyState<2:0<(s=i.readyState)&&4>s){for(Pace.restart(),f=Pace.sources,e=[],t=0,o=f.length;o>t;t++){if(n=f[t],n instanceof y){n.watch.apply(n,r);break}e.push(void 0)}return e}},n.restartOnRequestAfter))});y=function(){function n(){var n=this;this.elements=[];b().on("request",function(){return n.watch.apply(n,arguments)})}return n.prototype.watch=function(n){var t,i,r;return r=n.type,t=n.request,i="socket"===r?new ht(t):new ct(t),this.elements.push(i)},n}();ct=function(){function n(n){var f,o,i,e,r,u,t=this;if(this.progress=0,null!=window.ProgressEvent)for(o=null,n.addEventListener("progress",function(n){return t.progress=n.lengthComputable?100*n.loaded/n.total:t.progress+(100-t.progress)/2}),u=["load","abort","timeout","error"],i=0,e=u.length;e>i;i++)f=u[i],n.addEventListener(f,function(){return t.progress=100});else r=n.onreadystatechange,n.onreadystatechange=function(){var i;return 0===(i=n.readyState)||4===i?t.progress=100:3===n.readyState&&(t.progress=50),"function"==typeof r?r.apply(null,arguments):void 0}}return n}();ht=function(){function n(n){var r,t,u,i,f=this;for(this.progress=0,i=["error","open"],t=0,u=i.length;u>t;t++)r=i[t],n.addEventListener(r,function(){return f.progress=100})}return n}();rt=function(){function n(n){var r,t,u,i;for(null==n&&(n={}),this.elements=[],null==n.selectors&&(n.selectors=[]),i=n.selectors,t=0,u=i.length;u>t;t++)r=i[t],this.elements.push(new ut(r))}return n}();ut=function(){function t(n){this.selector=n;this.progress=0;this.check()}return t.prototype.check=function(){var t=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return t.check()},n.elements.checkInterval)},t.prototype.done=function(){return this.progress=100},t}();it=function(){function n(){var n,i,t=this;this.progress=null!=(i=this.states[document.readyState])?i:100;n=document.onreadystatechange;document.onreadystatechange=function(){return null!=t.states[document.readyState]&&(t.progress=t.states[document.readyState]),"function"==typeof n?n.apply(null,arguments):void 0}}return n.prototype.states={loading:0,interactive:50,complete:100},n}();ft=function(){function t(){var r,f,u,e,t,o=this;this.progress=0;r=0;t=[];e=0;u=i();f=setInterval(function(){var s;return s=i()-u-50,u=i(),t.push(s),t.length>n.eventLag.sampleCount&&t.shift(),r=lt(t),++e>=n.eventLag.minSamples&&r<n.eventLag.lagThreshold?(o.progress=100,clearInterval(f)):o.progress=300/(r+3)},50)}return t}();w=function(){function t(t){this.source=t;this.last=this.sinceLastUpdate=0;this.rate=n.initialRate;this.catchup=0;this.progress=this.lastProgress=0;null!=this.source&&(this.progress=d(this.source,"progress"))}return t.prototype.tick=function(t,i){var r;return null==i&&(i=d(this.source,"progress")),i>=100&&(this.done=!0),i===this.last?this.sinceLastUpdate+=t:(this.sinceLastUpdate&&(this.rate=(i-this.last)/this.sinceLastUpdate),this.catchup=(i-this.progress)/n.catchupTime,this.sinceLastUpdate=0,this.last=i),i>this.progress&&(this.progress+=this.catchup*t),r=1-Math.pow(this.progress/100,n.easeFactor),this.progress+=r*this.rate*t,this.progress=Math.min(this.lastProgress+n.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},t}();r=null;f=null;t=null;g=null;u=null;e=null;Pace.running=!1;k=function(){if(n.restartOnPushState)return Pace.restart()};null!=window.history.pushState&&(wt=window.history.pushState,window.history.pushState=function(){return k(),wt.apply(window.history,arguments)});null!=window.history.replaceState&&(bt=window.history.replaceState,window.history.replaceState=function(){return k(),bt.apply(window.history,arguments)});st={ajax:y,elements:rt,document:it,eventLag:ft};(yt=function(){var h,i,u,e,c,l,o,a,s;for(Pace.sources=r=[],o=["ajax","elements","document","eventLag"],u=0,c=o.length;c>u;u++)i=o[u],n[i]!==!1&&r.push(new st[i](n[i]));for(s=null!=(a=n.extraSources)?a:[],e=0,l=s.length;l>e;e++)h=s[e],r.push(new h(n));return Pace.bar=t=new tt,f=[],g=new w})();Pace.stop=function(){return Pace.running=!1,t.destroy(),e=!0,null!=u&&("function"==typeof o&&o(u),u=null),yt()};Pace.restart=function(){return Pace.stop(),Pace.go()};Pace.go=function(){return Pace.running=!0,t.render(),e=!1,u=pt(function(u,o){var nt,a,v,tt,y,s,h,et,c,l,p,it,b,k,d,rt,ut,ft;for(et=100-t.progress,a=b=0,v=!0,s=k=0,rt=r.length;rt>k;s=++k)for(p=r[s],l=null!=f[s]?f[s]:f[s]=[],y=null!=(ft=p.elements)?ft:[p],h=d=0,ut=y.length;ut>d;h=++d)tt=y[h],c=null!=l[h]?l[h]:l[h]=new w(tt),v&=c.done,c.done||(a++,b+=c.tick(u));return nt=b/a,t.update(g.tick(u,nt)),it=i(),t.done()||v||e?(t.update(100),setTimeout(function(){return t.finish(),Pace.running=!1},Math.max(n.ghostTime,Math.min(n.minTime,i()-it)))):o()})};Pace.start=function(i){s(n,i);Pace.running=!0;try{t.render()}catch(r){p=r}return document.querySelector(".pace")?Pace.go():setTimeout(Pace.start,50)};"function"==typeof define&&define.amd?define(function(){return Pace}):"object"==typeof exports?module.exports=Pace:n.startOnPageLoad&&Pace.start()}).call(this);
//# sourceMappingURL=pace.min.js.map